name: Run Newman Tests

on:
  workflow_dispatch:
    inputs:
      collection:
        description: "Path to the Postman collection"
        required: true
        default: "collections/reqres.postman_collection.json"

      environment:
        description: "Path to the Postman environment file"
        required: true
        default: "environments/dev.postman_environment.json"

      data:
        description: "Optional path to data file (JSON or CSV)"
        required: true
        default: "data/data.json"

jobs:
  run-postman-tests:
    runs-on: ubuntu-latest

    steps:
    - name: ‚¨áÔ∏è Checkout repository
      uses: actions/checkout@v3

    - name: üü¢ Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20'

    - name: üì¶ Install Newman
      run: npm install -g newman

    - name: ‚ñ∂Ô∏è Run Newman tests
      run: |
        newman run collections/reqres.postman_collection.json \
          -e environments/dev.postman_environment.json \
          -d data/data.json || true
